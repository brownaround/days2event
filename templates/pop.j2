{% extends "base.j2" %}
{% block title %}🎶 POP Music Festivals 2025 | Days2Event{% endblock %}
{% block description %}Explore the most popular pop music festivals worldwide! Countdown to Lollapalooza, Glastonbury, and more. All dates & official links here.{% endblock %}

{% block hero %}
<header class="hero">
  <h1>🎶 Top POP Festivals & Concerts 2025</h1>
  <p>Experience the world’s biggest pop music festivals, world tours from global icons to rising stars.</p>
  <p>Plan your next concert trip!</p>
</header>
{% endblock %}

{% block content %}
<div class="tabs artist-tabs">
  <button class="tab active" data-artist="All">All</button>
  {% for artist in unique_artists %}
    <button class="tab" data-artist="{{ artist }}">{{ artist }}</button>
  {% endfor %}
</div>
<div class="event-list">
  {% for event in events %}
    {% if event['Start Date'].date() >= now().date() %}
      <div class="card" data-artist="{{ event['Artist'] }}">
        <h2>{{ event['Event Name'] }}</h2>
        <div class="meta">
          {{ event['date_display'] }} ｜ {{ event['City'] }} {{ event['country_emoji'] }}
        </div>
        <div style="margin: 1em 0;"></div>
        <div class="button-row">
          <button class="days-left-btn" onclick="showDaysLeft(this, {{ (event['Start Date'].date() - now().date()).days }})">⏳ How many days left?</button>
        </div>
        <div class="button-row">
          {% if event['Official Site'] %}
            <a class="official-site-btn" href="{{ event['Official Site'] }}" target="_blank">Official Site</a>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>
{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabs = document.querySelectorAll('.artist-tabs .tab');
  const cards = document.querySelectorAll('.event-list .card');
  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      // 탭 활성화 표시
      tabs.forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      // 버튼의 아티스트 이름 추출 (All 포함)
      const artist = this.textContent.trim();
      cards.forEach(card => {
        // All 클릭 시 모두 표시, 아니면 해당 아티스트만 표시
        if (artist === 'All' || card.getAttribute('data-artist') === artist) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    });
  });
});
</script>

